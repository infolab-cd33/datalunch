<!DOCTYPE html>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Les catégories de data-truc</title>
<h1>Les catégories</h1>

<section id=datatrucs>

</section>

<script type="text/javascript">
const uniq = array => array.filter((elt, pos, arr) => arr.indexOf(elt) == pos)
const occurence = (array, key) => array.filter(item => item === key).length
fetch('http://api.daktary.com/infolab-cd33/datalunch/tree/master/fiches')
  .then(response => response.json())
  .then(fiches => {
      //console.log(datatrucs.body);
      const allCategories = fiches.body
        .filter(fiche =>fiche.meta)
        .map(fiche =>fiche.meta.categorie)


        .sort()
        uniq(allCategories).map(categorie => {
          console.log(categorie)
          console.log(occurence(allCategories, categorie))
        })

  })

</script>
